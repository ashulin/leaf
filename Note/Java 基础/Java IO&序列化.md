# Java IO/序列化

## IO

- Java IO即Java 输入输出系统；

- Input/OutPut数据的流动

- 在Java IO中，流是一个核心的概念。流从概念上来说是一个连续的数据流。

### IO流分类

- 按照流的流向分，可以分为**输入流**和**输出流**；
- 按照操作单元划分，可以划分为**字节流**和**字符流**；
    - **字节流**：一次读或写8位二进制。
    - **字符流**：一次读或写16位二进制。
- 按照流的角色划分为**节点流**和**处理流**。
    - **节点流**：程序直接连接到实际的数据源，进行读写。从/向一个特定的I/0设备（磁盘、网络等）读写数据的流称为节点流，也常被称为低级流。
    - **处理流**：又称高级流或包装流，处理流对一个已存在的节点流进行连接，通过封装后的流来进行读写。
- **InputStream/Reader**: 所有的输入流的基类，前者是字节输入流，后者是字符输入流。
- **OutputStream/Writer**: 所有输出流的基类，前者是字节输出流，后者是字符输出流。



![Java IO×字符×字节](..\Resources\Java IO×字符×字节.png)



![Java IO×操作对象](..\Resources\Java IO×操作对象.png)

## 序列化

- 序列化：将数据对象转换为二进制流；
- 反序列化：将二进制流转换为对象；

### 用处

#### **数据持久化**

在很多应用中，需要对好多对象进行序列化，存到物理硬盘，较长时间的保存，比如，Session对象，当有数万用户并发访问的时候，就会有数万的Session对象，内存会承受很大的压力，这个时候，就会把一些对象先序列化到硬盘中，需要使用的时候再还原到内存中。序列化对象要保留充分的信息，用来恢复数据对象，但是为了节约存储空间和网络带宽，序列化出的二进制流要尽可能小。

#### **网络传输**

当两个进程在互相通信的时候，就会进行数据传输，不管是何种类型的数据，都必须要转成二进制流来传输，接受方收到后再转为数据对象。

### 序列化协议

#### Java 原生序列化

```java
@Data
@NoArgsConstructor
public class Gear implements Serializable {
    private static final long serialVersionUID = -7333816285916354999L;
    private Long id;
    @Transient
    private String name;
}
```

- 实现***Serializable***标识接口；
- ***serialVersionUID***序列版本号不同时，不能反序列化；
- 除***serialVersionUID***外的静态变量（类变量）不会参与序列化；
- 

#### JSON序列化

与二机制序列化协议相比，因为冗余信息较多，最后形成的码流比二机制协议大，导致传输时间更长，效率低；但是JSON更便于调试；